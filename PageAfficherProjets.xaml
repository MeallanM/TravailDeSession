<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="TravailDeSession.PageAfficherProjets"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:TravailDeSession"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.Resources>
            <!-- Color Palette -->
            <Color x:Key="PrimaryColor">#D88A34</Color>
            <Color x:Key="PrimaryDarkColor">#B86F22</Color>
            <Color x:Key="SecondaryColor">#3A6C86</Color>
            <Color x:Key="NeutralDarkColor">#6A3A2A</Color>
            <Color x:Key="ErrorColor">#C4473A</Color>

            <!-- Brushes -->
            <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}" />
            <SolidColorBrush x:Key="PrimaryDarkBrush" Color="{StaticResource PrimaryDarkColor}" />
            <SolidColorBrush x:Key="SecondaryBrush" Color="{StaticResource SecondaryColor}" />
            <SolidColorBrush x:Key="NeutralDarkBrush" Color="{StaticResource NeutralDarkColor}" />
            <SolidColorBrush x:Key="ErrorBrush" Color="{StaticResource ErrorColor}" />
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Add Project Button -->
        <StackPanel Spacing="12" Grid.Row="0" Grid.Column="1">
            <Button x:Name="btnAjouterProjet"
                Click="btnAjouterProjet_Click"
                Padding="16,10"
                CornerRadius="12"
                Background="{StaticResource PrimaryBrush}"
                Foreground="White">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="6">
                    <FontIcon Glyph="&#xE710;" />
                    <TextBlock Text="Ajouter" />
                </StackPanel>
            </Button>
        </StackPanel>

        <!-- Page Title -->
        <TextBlock Text="Liste des Projets"
               HorizontalAlignment="Center"
               x:Name="tbTitrePageAfficherProjets"
               FontSize="24"
               FontWeight="Bold"
               Foreground="{StaticResource PrimaryBrush}"
               Grid.Row="0"
               Margin="0,10"/>

        <!-- Projects Grid (scrolls automatically) -->
        <GridView Grid.Row="1"
              ItemsSource="{x:Bind Projets}"
              IsItemClickEnabled="True"
              ItemClick="lvAfficher_ItemClick"
              HorizontalAlignment="Center"
              x:Name="lvbShowProjets"
              SelectionMode="None"
              Padding="20">

            <GridView.ItemTemplate>
                <DataTemplate x:DataType="local:Projet">
                    <Border Width="200"
                        Padding="10"
                        Margin="5"
                        Background="{StaticResource SecondaryBrush}"
                        CornerRadius="10"
                        BorderBrush="{StaticResource PrimaryBrush}"
                        BorderThickness="2">
                        <StackPanel Spacing="6" HorizontalAlignment="Center">

                            <TextBlock Text="{x:Bind NoProjet}" 
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Foreground="White"
                                   TextWrapping="NoWrap"
                                   IsTextSelectionEnabled="True"
                                   HorizontalAlignment="Center"/>

                            <TextBlock Text="{x:Bind Titre}" 
                                   FontWeight="SemiBold"
                                   FontSize="12"
                                   Foreground="White"
                                   Opacity="0.85"
                                   TextWrapping="NoWrap"
                                   IsTextSelectionEnabled="True"
                                   HorizontalAlignment="Center"/>

                            <TextBlock Text="{x:Bind DateDebut}"
                                   FontSize="12"
                                   Foreground="White"
                                   Opacity="0.85"
                                   HorizontalAlignment="Center"/>

                            <TextBlock Text="{x:Bind Client.Nom}"
                                   FontSize="12"
                                   Foreground="White"
                                   Opacity="0.85"
                                   TextWrapping="NoWrap"
                                   IsTextSelectionEnabled="True"
                                   HorizontalAlignment="Center"/>

                            <TextBlock Text="{x:Bind Budget}"
                                   FontSize="12"
                                   Foreground="White"
                                   Opacity="0.85"
                                   HorizontalAlignment="Center"/>

                            <TextBlock Text="{x:Bind NombreEmployesMax}"
                                   FontSize="12"
                                   Foreground="White"
                                   Opacity="0.85"
                                   HorizontalAlignment="Center"/>

                            <TextBlock Text="{x:Bind TotalSalaireDu}"
                                   FontSize="12"
                                   Foreground="White"
                                   Opacity="0.85"
                                   HorizontalAlignment="Center"/>

                            <TextBlock Text="{x:Bind Statut}"
                                   FontSize="12"
                                   Foreground="White"
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"/>

                            <!-- Afficher / Modifier Button -->
                            <Border Width="160"
                                Height="50"
                                CornerRadius="6"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Background="{StaticResource PrimaryBrush}">
                                <TextBlock Text="Afficher&#x0a;Modifier"
                                       Foreground="White"
                                       FontWeight="Bold"
                                       FontSize="14"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       TextAlignment="Center"/>
                            </Border>

                        </StackPanel>
                    </Border>
                </DataTemplate>
            </GridView.ItemTemplate>

        </GridView>
    </Grid>

</Page>
